<div id="venn-chart"></div>
<script>
// 1. 定义SVG容器
const width = 500, height = 400;
const svg = d3.select("#venn-chart")
  .append("svg")
  .attr("width", width)
  .attr("height", height);

// 2. 定义3个圆的位置和半径（模拟数据）
const circles = [
  {id: "delete", x: 200, y: 250, r: 150, color: "#d6a4a4"},
  {id: "replace", x: 300, y: 150, r: 120, color: "#c0a0b9"},
  {id: "rewrite", x: 400, y: 250, r: 150, color: "#e6d7a3"}
];

// 3. 定义区域标签（位置需调整到对应相交区域）
const labels = [
  {text: "I", x: 150, y: 300},
  {text: "II", x: 300, y: 100},
  {text: "III", x: 450, y: 300},
  {text: "IV", x: 250, y: 200},
  {text: "V", x: 350, y: 200},
  {text: "VI", x: 250, y: 300},
  {text: "VII", x: 300, y: 250}
];
  // 绘制圆（带透明度，显示相交效果）
svg.selectAll("circle")
  .data(circles)
  .enter()
  .append("circle")
  .attr("cx", d => d.x)
  .attr("cy", d => d.y)
  .attr("r", 0) // 初始半径为0，用于过渡动画
  .attr("fill", d => d.color)
  .attr("opacity", 0.7)
  // 过渡动画：半径从0变为目标值
  .transition()
  .duration(1500)
  .attr("r", d => d.r);

// 绘制标签
svg.selectAll("text.label")
  .data(labels)
  .enter()
  .append("text")
  .attr("class", "label")
  .attr("x", d => d.x)
  .attr("y", d => d.y)
  .attr("font-size", 20)
  .attr("opacity", 0) // 初始透明
  .text(d => d.text)
  // 过渡动画：延迟后显示标签
  .transition()
  .delay(1500)
  .duration(500)
  .attr("opacity", 1);
  // 给圆添加点击交互
svg.selectAll("circle")
  .on("click", function(e, d) {
    alert(`This circle represents: ${d.id}`);
  })
  .on("mouseover", function() {
    d3.select(this).attr("stroke", "black").attr("stroke-width", 2);
  })
  .on("mouseout", function() {
    d3.select(this).attr("stroke", "none");
  });
  <div id="bar-chart"></div>
<script>
// 1. SVG容器
const barWidth = 500, barHeight = 300;
const barSvg = d3.select("#bar-chart")
  .append("svg")
  .attr("width", barWidth)
  .attr("height", barHeight);

// 2. 数据（模型、准确率、误差）
const barData = [
  {model: "BERT", accuracy: 74.4, error: 64.8},
  {model: "RoBERTa", accuracy: 81.9, error: 65.5},
  {model: "BART", accuracy: 73.1, error: 63.5}
];

// 3. 比例尺（映射数据到画布）
const xScale = d3.scaleBand()
  .domain(barData.map(d => d.model))
  .range([50, barWidth - 50])
  .padding(0.5);

const yScale = d3.scaleLinear()
  .domain([0, 100])
  .range([barHeight - 50, 50]);
  // 绘制Y轴
barSvg.append("g")
  .attr("transform", `translate(50, 0)`)
  .call(d3.axisLeft(yScale));

// 绘制X轴
barSvg.append("g")
  .attr("transform", `translate(0, ${barHeight - 50})`)
  .call(d3.axisBottom(xScale));

// 绘制柱状图（过渡动画：从下往上生长）
barSvg.selectAll("rect.bar")
  .data(barData)
  .enter()
  .append("rect")
  .attr("class", "bar")
  .attr("x", d => xScale(d.model))
  .attr("y", barHeight - 50) // 初始在底部
  .attr("width", xScale.bandwidth())
  .attr("height", 0) // 初始高度0
  .attr("fill", "#e6d7a3")
  // 过渡动画：高度从0变为目标值
  .transition()
  .duration(1000)
  .attr("y", d => yScale(d.accuracy))
  .attr("height", d => (barHeight - 50) - yScale(d.accuracy));

// 绘制误差线（虚线）
barSvg.selectAll("line.error")
  .data(barData)
  .enter()
  .append("line")
  .attr("class", "error")
  .attr("x1", d => xScale(d.model) + xScale.bandwidth()/2)
  .attr("y1", d => yScale(d.error))
  .attr("x2", d => xScale(d.model) + xScale.bandwidth()/2)
  .attr("y2", barHeight - 50)
  .attr("stroke", "#d3d3d3")
  .attr("stroke-dasharray", "4")
  .attr("opacity", 0) // 初始透明
  // 过渡动画：延迟后显示
  .transition()
  .delay(1000)
  .duration(500)
  .attr("opacity", 1);
  // 给柱子添加hover交互
barSvg.selectAll("rect.bar")
  .on("mouseover", function(e, d) {
    // 显示 tooltip
    barSvg.append("text")
      .attr("class", "tooltip")
      .attr("x", xScale(d.model) + xScale.bandwidth()/2)
      .attr("y", yScale(d.accuracy) - 10)
      .attr("text-anchor", "middle")
      .text(`Accuracy: ${d.accuracy}%`);
    d3.select(this).attr("fill", "#d6a4a4");
  })
  .on("mouseout", function() {
    barSvg.select(".tooltip").remove();
    d3.select(this).attr("fill", "#e6d7a3");
  });
