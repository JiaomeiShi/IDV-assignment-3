<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>IDV Assignment 3 — Jiaomei Shi</title>
  <style>
    body {
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, "Noto Sans", "PingFang SC", "Microsoft YaHei", sans-serif;
      background: #eef4f4;
      margin: 0;
      padding: 32px;
    }
    h1 { margin: 0 0 8px 0; }
    .card {
      background: #fff;
      border-radius: 12px;
      box-shadow: 0 4px 16px rgba(0,0,0,.06);
      padding: 20px;
      margin-bottom: 28px;
    }
    .note-block { margin: 40px 0; color: #374151; }
  </style>
  <script src="https://d3js.org/d3.v7.min.js"></script>
</head>

<body>
<h1>IDV Assignment 3 — Jiaomei Shi</h1>

<!-- ================= Chart 6 ================= -->
<h2 style="margin-top:40px;">Chart 6 — Transformer Schematic</h2>
<div id="chart6" class="card"></div>
<script>
const w6 = 880, h6 = 420;
const svg6 = d3.select("#chart6").append("svg").attr("width", w6).attr("height", h6);

// background layers
svg6.append("rect").attr("x",50).attr("y",60).attr("width",780).attr("height",300).attr("fill","#f9fafb").attr("stroke","#cbd5e1");
svg6.append("text").attr("x",70).attr("y",90).text("Transformer Encoder-Decoder Architecture").attr("font-weight","bold");

// encoder boxes
const encs = ["Embedding","Positional Encoding","Multi-Head Attention","Feed Forward"];
encs.forEach((t,i)=>{
  svg6.append("rect").attr("x",100).attr("y",120+i*45).attr("width",200).attr("height",30)
      .attr("fill","#dbeafe").attr("stroke","#2563eb");
  svg6.append("text").attr("x",200).attr("y",140+i*45).text(t).attr("text-anchor","middle").attr("alignment-baseline","middle");
});

// decoder boxes
const decs = ["Masked Multi-Head Attention","Encoder-Decoder Attention","Feed Forward","Classification Head"];
decs.forEach((t,i)=>{
  svg6.append("rect").attr("x",480).attr("y",120+i*45).attr("width",230).attr("height",30)
      .attr("fill","#dcfce7").attr("stroke","#16a34a");
  svg6.append("text").attr("x",595).attr("y",140+i*45).text(t).attr("text-anchor","middle").attr("alignment-baseline","middle");
});

// arrows
svg6.selectAll(".arrow")
  .data([
    {x1:300,y1:135,x2:480,y2:135},
    {x1:300,y1:180,x2:480,y2:180},
    {x1:300,y1:225,x2:480,y2:225},
    {x1:300,y1:270,x2:480,y2:270}
  ])
  .enter().append("line")
  .attr("x1",d=>d.x1).attr("y1",d=>d.y1)
  .attr("x2",d=>d.x1).attr("y2",d=>d.y1)
  .attr("stroke","#64748b").attr("stroke-width",2)
  .transition().duration(800)
  .attr("x2",d=>d.x2).attr("y2",d=>d.y2);
</script>

<div class="note-block">
  <p>This chart replicates a simplified Transformer architecture, showing data flow between encoder and decoder modules. I used rectangles and connecting arrows to represent components and relationships. The transition animates data passing from encoder to decoder, demonstrating a clear sequential logic of the model pipeline.</p>
</div>

<!-- ================= Chart 7 ================= -->
<h2 style="margin-top:40px;">Chart 7 — Three-Set Venn Diagram</h2>
<div id="chart7" class="card"></div>
<script>
const w7=880,h7=400;
const svg7=d3.select("#chart7").append("svg").attr("width",w7).attr("height",h7);

const circles=[
  {x:320,y:200,r:120,c:"#fca5a5",label:"Delete"},
  {x:460,y:200,r:120,c:"#93c5fd",label:"Replace"},
  {x:390,y:320,r:120,c:"#86efac",label:"Rewrite"}
];
svg7.selectAll("circle").data(circles).enter().append("circle")
.attr("cx",d=>d.x).attr("cy",d=>d.y).attr("r",d=>d.r)
.attr("fill",d=>d.c).attr("opacity",0.4)
.on("mouseover",function(){d3.select(this).transition().duration(150).attr("opacity",0.7);})
.on("mouseout",function(){d3.select(this).transition().duration(150).attr("opacity",0.4);});

svg7.selectAll("text").data(circles).enter().append("text")
.text(d=>d.label).attr("x",d=>d.x).attr("y",d=>d.y)
.attr("text-anchor","middle").attr("font-size","18px").attr("fill","#111827").attr("dy",".3em");
</script>

<div class="note-block">
  <p>This Venn diagram visualizes relationships among three text operation categories: Delete, Replace, and Rewrite. Semi-transparent circles highlight overlaps, while hover effects emphasize interrelations. It demonstrates D3’s ability to render abstract logical relations with geometric primitives.</p>
</div>

<!-- ================= Chart 8 ================= -->
<h2 style="margin-top:40px;">Chart 8 — Cross-Validation Accuracy</h2>
<div id="chart8" class="card"></div>
<script>
const w8=880,h8=400,m8={t:30,r:30,b:40,l:60};
const svg8=d3.select("#chart8").append("svg").attr("width",w8).attr("height",h8);
const data8=[
 {model:"BERT",acc:92.4,base:89.5},
 {model:"RoBERTa",acc:94.1,base:91.0},
 {model:"BART",acc:93.2,base:90.2}
];
const x8=d3.scaleBand().domain(data8.map(d=>d.model)).range([m8.l,w8-m8.r]).padding(0.5);
const y8=d3.scaleLinear().domain([85,96]).range([h8-m8.b,m8.t]);
svg8.append("g").attr("transform",`translate(0,${h8-m8.b})`).call(d3.axisBottom(x8));
svg8.append("g").attr("transform",`translate(${m8.l},0)`).call(d3.axisLeft(y8));
svg8.selectAll(".ghost").data(data8).enter().append("rect")
 .attr("x",d=>x8(d.model)+x8.bandwidth()/2).attr("y",d=>y8(d.base))
 .attr("width",x8.bandwidth()/2).attr("height",d=>y8(85)-y8(d.base))
 .attr("fill","none").attr("stroke","#64748b").attr("stroke-dasharray","4 2").attr("opacity",0.6);
svg8.selectAll(".bar").data(data8).enter().append("rect")
 .attr("x",d=>x8(d.model)).attr("y",y8(85))
 .attr("width",x8.bandwidth()/2).attr("height",0).attr("fill","#3b82f6")
 .on("mouseover",function(){d3.select(this).transition().duration(150).attr("fill","#1d4ed8");})
 .on("mouseout",function(){d3.select(this).transition().duration(150).attr("fill","#3b82f6");})
 .transition().delay((_,i)=>200+i*200).duration(800)
 .attr("y",d=>y8(d.acc)).attr("height",d=>y8(85)-y8(d.acc));
svg8.selectAll(".val").data(data8).enter().append("text")
 .attr("x",d=>x8(d.model)+20).attr("y",d=>y8(d.acc)-6)
 .text(d=>d.acc.toFixed(1)).attr("font-size","13px").attr("fill","#111827");
</script>

<div class="note-block">
  <p>This bar chart compares cross-validation accuracies among three NLP models. The dashed outlines represent baseline scores, while solid bars indicate improved results. Bars animate upward, and hovering changes color for interactivity. This chart exemplifies D3’s data-binding and transition techniques for performance comparison.</p>
</div>

<!-- ================= Chart 9 ================= -->
<h2 style="margin-top:40px;">Chart 9 — Sketch Line Animation</h2>
<div id="chart9" class="card"></div>
<script>
const w9=880,h9=400;
const svg9=d3.select("#chart9").append("svg").attr("width",w9).attr("height",h9);
const path9="M100,200 C200,100 400,100 500,200 S800,300 780,180";
const p9=svg9.append("path").attr("d",path9).attr("fill","none")
  .attr("stroke","#9333ea").attr("stroke-width",3)
  .attr("stroke-dasharray","1000").attr("stroke-dashoffset","1000");
p9.transition().duration(2000).ease(d3.easeCubicInOut).attr("stroke-dashoffset",0);
</script>

<div class="note-block">
  <p>This sketch-style chart demonstrates stroke animation along a curved path. By gradually revealing the line using <code>stroke-dasharray</code> and <code>stroke-dashoffset</code>, it simulates hand-drawn motion. Such technique is commonly applied in explanatory graphics, interactive timelines, and animated process illustrations.</p>
</div>

<!-- ================= Chart 11 ================= -->
<h2 style="margin-top:40px;">Chart 11 — Two Distributions with Decision Band</h2>
<div id="chart11" class="card"></div>
<script>
const w11=880,h11=400,m11={t:30,r:30,b:40,l:60};
const svg11=d3.select("#chart11").append("svg").attr("width",w11).attr("height",h11);
const x11=d3.scaleLinear().domain([-2,5]).range([m11.l,w11-m11.r]);
const y11=d3.scaleLinear().domain([0,0.4]).range([h11-m11.b,m11.t]);
function pdf(x,mu,s){return (1/(s*Math.sqrt(2*Math.PI)))*Math.exp(-0.5*((x-mu)/s)**2);}
const xs=d3.range(-2,5.01,0.02);
const dataA=xs.map(x=>({x,y:pdf(x,0.2,0.7)}));
const dataB=xs.map(x=>({x,y:pdf(x,2,0.8)}));
svg11.append("rect").attr("x",x11(0.9)).attr("y",y11(0.33))
.attr("width",x11(1.3)-x11(0.9)).attr("height",y11(0)-y11(0.33))
.attr("fill","#cbd5e1").attr("opacity",0.6);
svg11.selectAll(".thr").data([0.9,1.3]).enter().append("line")
.attr("x1",d=>x11(d)).attr("x2",d=>x11(d))
.attr("y1",y11(0)).attr("y2",y11(0.35))
.attr("stroke","#475569").attr("stroke-dasharray","6 6");
const line11=d3.line().x(d=>x11(d.x)).y(d=>y11(d.y)).curve(d3.curveBasis);
svg11.append("path").datum(dataA).attr("fill","none").attr("stroke","#f59e0b").attr("stroke-width",3).attr("d",line11);
svg11.append("path").datum(dataB).attr("fill","none").attr("stroke","#059669").attr("stroke-width",3).attr("d",line11);
</script>

<div class="note-block">
  <p>This chart depicts two Gaussian-like distributions representing model outputs for two classes. The shaded gray band between thresholds 0.9–1.3 illustrates an uncertain decision region. D3’s line generator and linear scales were used to draw smooth probability curves. Such visuals are crucial in model calibration and threshold analysis.</p>
</div>

</body>
</html>
